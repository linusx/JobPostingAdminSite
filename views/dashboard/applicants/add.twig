{% extends "dashboard/base.twig" %}

{% block content %}
    <div class="container">
        <div id="post" class="row individual-wrapper">
            <div class="col-xs-12 no-col-padding header">
                {% if error %}
                    <div class="alert alert-danger alert-dismissable fade in">
                        <a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
                        <strong>Error!</strong> {{ error|raw }}
                    </div>
                {% endif %}
                <div class="row">
                    <form action="" method="POST" id="user-add">
                        <div class="col-xs-12">
                            <h3>Add User</h3>
                        </div>

                        <div class="col-xs-12 col-md-6 form-group">
                            <label>First Name</label>
                            <input class="form-control" type="text" name="firstname" placeholder="First Name"/>
                        </div>

                        <div class="col-xs-12 col-md-6 form-group">
                            <label>Last Name</label>
                            <input class="form-control" type="text" name="lastname" placeholder="Last Name"/>
                        </div>

                        <div class="col-xs-12 col-md-6 form-group">
                            <label>Email</label>
                            <input class="form-control" type="text" name="email" placeholder="Email Address"/>
                        </div>

                        <div class="col-xs-12 col-md-6 form-group">
                            <label>Role</label>
                            <select class="form-control" name="role">
                                <option value="applicant">-- Select Role --</option>
                                <option value="applicant">Applicant</option>
                                <option value="client">Client</option>
                                <option value="admin">Admin</option>
                            </select>
                        </div>

                        <div class="col-xs-12 col-md-6 form-group">
                            <label>Password</label>
                            <input class="form-control" type="password" name="passwd" placeholder="Password"/>
                        </div>

                        <div class="col-xs-12 col-md-6 form-group">
                            <label>Confirm</label>
                            <input class="form-control" type="password" name="passwd_confirm" placeholder="Confirm Password"/>
                        </div>

                        <div class="col-xs-12 form-group text-right">
                            <button type="submit" class="btn btn-primary">Add User</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
{% endblock %}

{% block footer %}
    <script>
		$(function() {
			$(document).on('submit', '#user-add', function() {
				var firstname = $('input[name="firstname"]'),
					lastname = $('input[name="lastname"]'),
					email = $('input[name="email"]'),
                    passwd = $('input[name="passwd"]'),
					confirm_passwd = $('input[name="passwd_confirm"]'),
					has_error = false;

				$('div.form-group').removeClass('has-error');

				if ( '' === firstname.val() ) {
					firstname.parent().addClass('has-error');
					has_error = true;
				}

				if ( '' === lastname.val() ) {
					lastname.parent().addClass('has-error');
					has_error = true;
				}

				if ( '' === email.val() ) {
					email.parent().addClass('has-error');
					has_error = true;
				}

				if ( '' === passwd.val() || passwd.val() !== confirm_passwd.val() ) {
					passwd.parent().addClass('has-error');
					has_error = true;
                }

				return true !== has_error;

			});
		});
    </script>
{% endblock %}